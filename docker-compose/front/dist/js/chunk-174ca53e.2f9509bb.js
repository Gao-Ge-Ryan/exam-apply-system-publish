(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-174ca53e"],{"21e0":function(t,e,s){},"4c53":function(t,e,s){"use strict";var a=s("23e7"),i=s("857a"),n=s("af03");a({target:"String",proto:!0,forced:n("sub")},{sub:function(){return i(this,"sub","","")}})},"768e":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"main"},[s("div",{staticClass:"left"},[s("div",{staticClass:"area"},[s("div",{staticClass:"label word"},[t._v("头像：")]),s("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http://82.157.42.25:5050/file/upload","show-file-list":!1,"on-success":t.handleAvatarSuccess}},[t.imageUrl?s("img",{staticClass:"avatar",attrs:{src:t.imageUrl}}):s("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),s("div",{staticClass:"area word"},[s("div",{staticClass:"label word"},[t._v("用户名：")]),s("div",[t._v(t._s(t.info.userName))])]),s("div",{staticClass:"area"},[s("div",{staticClass:"label word"},[t._v("昵称：")]),s("el-input",{model:{value:t.info.nickName,callback:function(e){t.$set(t.info,"nickName",e)},expression:"info.nickName"}})],1),s("div",{staticClass:"area word"},[s("div",{staticClass:"label word"},[t._v("手机号：")]),s("el-input",{model:{value:t.info.phone,callback:function(e){t.$set(t.info,"phone",e)},expression:"info.phone"}})],1),s("div",{staticClass:"area word"},[s("div",{staticClass:"label word"},[t._v("身份证号：")]),s("el-input",{model:{value:t.info.identityNum,callback:function(e){t.$set(t.info,"identityNum",e)},expression:"info.identityNum"}})],1),s("div",{staticClass:"area word"},[s("div",{staticClass:"label word"},[t._v("地址：")]),s("el-input",{model:{value:t.info.address,callback:function(e){t.$set(t.info,"address",e)},expression:"info.address"}})],1),s("el-button",{attrs:{type:"primary"},on:{click:t.updateInfo}},[t._v("确认修改")])],1),s("div",{staticClass:"right"},[s("div",{staticClass:"inputBox"},[s("el-input",{staticStyle:{width:"300px","margin-bottom":"30px"},attrs:{type:"text",placeholder:"新密码"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),s("el-input",{staticStyle:{width:"300px","margin-bottom":"30px"},attrs:{type:"text",placeholder:"验证码"},model:{value:t.authCode,callback:function(e){t.authCode=e},expression:"authCode"}})],1),t.isCheck?s("div",{staticClass:"check",on:{click:t.getAuthCode}},[t._v("点击获取验证码 ")]):s("div",{staticClass:"check-false"},[t._v("重新获取("+t._s(t.time)+")")]),s("el-button",{attrs:{type:"primary"},on:{click:t.updatePassword}},[t._v("修改密码")])],1)])},i=[],n=s("5530"),o=(s("4c53"),s("2f62")),c={mounted:function(){this.getInfo()},data:function(){return{info:{},password:"",authCode:"",isCheck:!0,time:60,imageUrl:""}},computed:Object(n["a"])({},Object(o["b"])({userInfo:function(t){return t.personalCenter.userInfo}})),methods:{handleAvatarSuccess:function(t){console.log(t),this.imageUrl=t.data.accessAddress,this.$message.success("头像上传成功，点击修改保存")},getInfo:function(){var t=this;this.$store.dispatch("getInfo").then((function(e){console.log(t.userInfo),t.info=t.userInfo,t.imageUrl=t.userInfo.avatar}))},updateInfo:function(){var t=this,e={nickName:this.info.nickName,phone:this.info.phone,identityNum:this.info.identityNum,address:this.info.address,avatar:this.imageUrl};this.$store.dispatch("updateUserInfo",e).then((function(e){t.$message.success("修改成功"),t.getInfo()}))},getAuthCode:function(){var t=this;this.isCheck=!1;var e=setInterval((function(){t.time>0&&t.time--,0===t.time&&(t.isCheck=!0,t.time=60,clearInterval(e))}),1e3),s={receiver:JSON.parse(localStorage.getItem("userInfo")).sub};this.$store.dispatch("getAuthCode",s)},updatePassword:function(){var t=this;this.$store.dispatch("updatePassword",{password:this.password,inputCode:this.authCode}).then((function(e){t.$message.success("密码修改成功")})).catch((function(e){console.log(e),t.$message.error(e)}))}}},r=c,l=(s("ce22"),s("2877")),u=Object(l["a"])(r,a,i,!1,null,"2badc9e2",null);e["default"]=u.exports},"857a":function(t,e,s){var a=s("e330"),i=s("1d80"),n=s("577e"),o=/"/g,c=a("".replace);t.exports=function(t,e,s,a){var r=n(i(t)),l="<"+e;return""!==s&&(l+=" "+s+'="'+c(n(a),o,"&quot;")+'"'),l+">"+r+"</"+e+">"}},af03:function(t,e,s){var a=s("d039");t.exports=function(t){return a((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}},ce22:function(t,e,s){"use strict";s("21e0")}}]);
//# sourceMappingURL=chunk-174ca53e.2f9509bb.js.map